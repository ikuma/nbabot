# Polymarket
POLYMARKET_PRIVATE_KEY=
POLYMARKET_HOST=https://clob.polymarket.com
POLYMARKET_CHAIN_ID=137
# Wallet type: 0=EOA (MetaMask), 1=POLY_PROXY (email login), 2=GNOSIS_SAFE
POLYMARKET_SIGNATURE_TYPE=0
# Proxy wallet address (POLY_PROXY の場合のみ。Polymarket profile ページで確認)
POLYMARKET_FUNDER=

# HTTP proxy for geo-restricted APIs (Polymarket blocks some regions)
# e.g. socks5://127.0.0.1:1080 or http://127.0.0.1:8080
HTTP_PROXY=

# The Odds API (used for game discovery; optional in Phase 2+)
ODDS_API_KEY=

# Telegram notifications (optional)
TELEGRAM_BOT_TOKEN=
TELEGRAM_CHAT_ID=

# Strategy mode: "calibration" (default) or "bookmaker" (legacy)
STRATEGY_MODE=calibration

# Execution mode: "paper" (default), "live", "dry-run"
EXECUTION_MODE=paper
MIN_BALANCE_USD=50

# Risk parameters
MAX_POSITION_USD=25
MAX_DAILY_POSITIONS=5
MAX_DAILY_EXPOSURE_USD=375
KELLY_FRACTION=0.25

# Position sizing (liquidity-aware)
CAPITAL_RISK_PCT=2.0
LIQUIDITY_FILL_PCT=10.0
MAX_SPREAD_PCT=10.0
CHECK_LIQUIDITY=true

# Scheduler (per-game timing)
SCHEDULE_WINDOW_HOURS=8.0
SCHEDULE_MAX_RETRIES=3
MAX_ORDERS_PER_TICK=3

# DCA (Dollar Cost Averaging — TWAP adaptive)
DCA_MAX_ENTRIES=5
DCA_MAX_PRICE_SPREAD=0.15
DCA_MIN_INTERVAL_MIN=2
DCA_FAVORABLE_PRICE_PCT=0.0
DCA_UNFAVORABLE_PRICE_PCT=10.0
DCA_CUTOFF_BEFORE_TIPOFF_MIN=30
DCA_PER_ENTRY_CAP_MULT=2.0
DCA_MIN_ORDER_USD=1.0

# Both-Side Betting (Phase B/H)
BOTHSIDE_ENABLED=true
BOTHSIDE_MAX_COMBINED_VWAP=0.995
# BOTHSIDE_TARGET_COMBINED=0.97         # DEPRECATED — executor uses dynamic MERGE-based pricing
# BOTHSIDE_TARGET_MODE=static           # DEPRECATED
# BOTHSIDE_TARGET_COMBINED_MIN=0.90     # DEPRECATED
# BOTHSIDE_TARGET_COMBINED_MAX=0.994    # DEPRECATED
# BOTHSIDE_DYNAMIC_ESTIMATED_FEE_USD=0.20  # DEPRECATED
BOTHSIDE_HEDGE_KELLY_MULT=0.5
BOTHSIDE_HEDGE_RATIO_MODE=static
BOTHSIDE_HEDGE_RATIO_FILE=data/optimized/hedge_ratio.json
BOTHSIDE_HEDGE_DELAY_MIN=30
# BOTHSIDE_HEDGE_MAX_PRICE=0.55         # DEPRECATED — scanner always returns hedge

# MERGE (Phase B2/H — CTF mergePositions)
MERGE_ENABLED=true
MERGE_MAX_COMBINED_VWAP=0.998
MERGE_MIN_PROFIT_USD=0.10
MERGE_EST_GAS_USD=0.05
MERGE_MIN_SHARES_FLOOR=20.0
MERGE_EARLY_PARTIAL_ENABLED=false
MERGE_EARLY_PARTIAL_ASSUMED_FEE_USD=0.05
MERGE_EARLY_PARTIAL_CAPITAL_RATE_PER_HOUR=0.0005
MERGE_EARLY_PARTIAL_POST_TIPOFF_HOURS=3.0
MERGE_EARLY_PARTIAL_MIN_BENEFIT_OVER_FEE_USD=0.0
MERGE_EARLY_PARTIAL_ROLLOUT_PCT=25
MERGE_EARLY_PARTIAL_MAX_PER_TICK=1
MERGE_EARLY_PARTIAL_GUARD_LOOKBACK=20
MERGE_EARLY_PARTIAL_GUARD_MIN_SAMPLES=5
MERGE_EARLY_PARTIAL_GUARD_MIN_AVG_NET_PROFIT_USD=-0.05
MERGE_GAS_BUFFER_GWEI=50
MERGE_MAX_RETRIES=3
MERGE_CTF_ADDRESS=0x4D97DCd97eC945f40cF65F87097ACe5EA0476045
MERGE_COLLATERAL_ADDRESS=0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174
MERGE_POLYGON_RPC=https://polygon-rpc.com
# Safe MERGE (Phase B3 — POLY_PROXY)
MERGE_SAFE_OUTER_GAS_LIMIT=400000

# Risk management (Phase D)
DAILY_LOSS_LIMIT_PCT=3.0
WEEKLY_LOSS_LIMIT_PCT=5.0
MAX_DRAWDOWN_LIMIT_PCT=15.0
RISK_CHECK_ENABLED=true
CALIBRATION_DRIFT_THRESHOLD=2.0
MAX_TOTAL_EXPOSURE_PCT=30.0
RISK_MAX_SINGLE_GAME_USD=200.0
PNL_DIVERGENCE_SHORT_DAYS=7
PNL_DIVERGENCE_LONG_DAYS=28
PNL_DIVERGENCE_MIN_TOTAL_SHORT=30
PNL_DIVERGENCE_MIN_TOTAL_LONG=80
PNL_DIVERGENCE_MIN_BAND_SHORT=10
PNL_DIVERGENCE_YELLOW_TOTAL_GAP_PCT=-15.0
PNL_DIVERGENCE_YELLOW_TOTAL_GAP_USD=-50.0
PNL_DIVERGENCE_YELLOW_BAND_GAP_PCT=-20.0
PNL_DIVERGENCE_YELLOW_BAND_GAP_USD=-20.0
PNL_DIVERGENCE_YELLOW_BAND_COUNT=2
PNL_DIVERGENCE_ORANGE_SHORT_GAP_PCT=-25.0
PNL_DIVERGENCE_ORANGE_SHORT_GAP_USD=-100.0
PNL_DIVERGENCE_ORANGE_LONG_GAP_PCT=-10.0
STRUCTURAL_CHANGE_WINDOW_DAYS=28
STRUCTURAL_CHANGE_CUSUM_K=0.5
STRUCTURAL_CHANGE_CUSUM_H_YELLOW=4.5
STRUCTURAL_CHANGE_CUSUM_H_ORANGE=6.0
STRUCTURAL_CHANGE_MIN_POINTS=8
STRUCTURAL_CHANGE_YELLOW_BAND_COUNT=1
STRUCTURAL_CHANGE_ORANGE_BAND_COUNT=2

# LLM Game Analysis (Phase L)
LLM_ANALYSIS_ENABLED=false
ANTHROPIC_API_KEY=
# Model: claude-opus-4-6 (default, $72/mo), claude-sonnet-4-5-20250929 ($14/mo), claude-haiku-4-5-20251001 ($5/mo)
LLM_MODEL=claude-opus-4-6
LLM_TIMEOUT_SEC=30
LLM_MAX_SIZING_MODIFIER=1.5
LLM_MIN_SIZING_MODIFIER=0.5

# Order lifecycle manager (Phase O)
ORDER_MANAGER_ENABLED=true
ORDER_TTL_MIN=5
ORDER_MAX_REPLACES=3
ORDER_MIN_PRICE_MOVE=0.01
ORDER_CHECK_BATCH_SIZE=10
ORDER_RATE_LIMIT_SLEEP=0.5

# Continuous calibration curve (Phase Q)
CALIBRATION_CONFIDENCE_LEVEL=0.90

# Legacy bookmaker mode parameters
MIN_EDGE_PCT=1.0
